====================================================================
한국언론진흥재단 뉴스 빅데이터 분석 시스템 OpenAPI 매뉴얼
====================================================================
작성자: 왕경문
작성일: 2023-06-21
버전: 1.49

--------------------------------------------------------------------
1. 개요
--------------------------------------------------------------------
키워드와 다양한 조건을 지정하여 뉴스 데이터를 검색할 수 있습니다.

--------------------------------------------------------------------
2. API 요청 정보
--------------------------------------------------------------------

▶ 요청 URL
https://tools.kinds.or.kr/search/news

▶ 요청 형식 (JSON)
{
  "access_key": "발급받은 API 키",
  "argument": {
    "query": "검색어",
    "published_at": {
      "from": "시작일 (YYYY-MM-DD)",
      "until": "종료일 (YYYY-MM-DD)"
    },
    "provider": ["언론사명"],
    "category": ["뉴스 분류"],
    "category_incident": ["사건/사고 분류"],
    "byline": "기자명",
    "provider_subject": ["언론사 주제 분류"],
    "subject_info": [""],
    "subject_info1": [""],
    "subject_info2": [""],
    "subject_info3": [""],
    "subject_info4": [""],
    "sort": {"date": "desc"},
    "hilight": 200,
    "return_from": 0,
    "return_size": 5,
    "fields": ["반환받을 필드명"]
  }
}

--------------------------------------------------------------------
3. 파라미터 상세 설명
--------------------------------------------------------------------

■ query (검색 질의어)
- 검색어 없이도 검색 가능
- 검색 연산자
  · AND, OR, NOT (부울린 검색)
  · "" (구문 검색)
  · () (연산자 우선순위)
  
  예시:
  - "사과 AND 배 NOT 과일"
  - "아담과 이브" (구문 검색)
  - "(사과 OR 배) AND 과일" (우선순위)

- 검색 영역 지정
  · 기본: 제목과 본문에서 검색
    "query": "사과 AND 배"
  
  · 제목에서만 검색
    "query": {
      "title": "사과 AND 배"
    }
  
  · 본문에서만 검색
    "query": {
      "content": "사과 AND 배"
    }

■ published_at (검색 기간)
- 날짜 형식: YYYY-MM-DD (한국 시간 기준)
- from: 조회 시작일 (해당 일자 포함)
- until: 조회 종료일 (해당 일자 제외)

■ provider (언론사)
- 명칭 또는 코드 값으로 지정 가능
- 여러 언론사 지정 시 OR 조건으로 검색
- 예시: ["경향신문", "한겨레"]

■ category (뉴스 통합 분류체계)
- 한국언론진흥재단 뉴스 통합 분류체계 값
- 명칭 또는 코드 값으로 지정 가능
- 여러 분류 값 지정 시 OR 조건으로 검색
- 예시: ["정치>정치일반", "IT_과학"]

■ category_incident (사건/사고 분류체계)
- 한국언론진흥재단 뉴스 사건/사고 분류체계 값
- 명칭 또는 코드 값으로 지정 가능
- 여러 분류 값 지정 시 OR 조건으로 검색
- 예시: ["범죄", "교통사고", "재해>자연재해"]

■ byline (기자 이름)
- 기자 이름을 조건으로 지정
- 여러 기자 지정 시 OR 연산자 사용 가능
- 언론사에서 기자 이름을 제공한 뉴스만 검색 가능

■ provider_subject (언론사 주제 분류)
- 언론사에서 제공한 뉴스의 주제 분류 값(코드)
- subject_info 또는 subject_info1~4 사용 권장
- 배열 항목은 AND로 검색
- 배열 내 콤마(,) 구분자는 OR로 검색

  예시:
  SubjectInfo = "경제,부동산"
  SubjectInfo3 = "10000123"
  → "provider_subject": ["경제,부동산", "10000123"]

■ subject_info / subject_info1~4
- NewsML의 SubjectInfo, SubjectInfo1~4 내용 검색
- provider_subject의 모호성 해결을 위해 각 프로퍼티 분리
- comma 또는 파이프(|) 구분자로 값 지정 시 배열로 선언

■ sort (정렬 방식)
- 지정하지 않으면 검색 정확도 순으로 조회

정렬 옵션:
- 최신 기사순: {"date": "desc"}
- 과거 기사순: {"date": "asc"}
- 제목순: {"title": "asc"} (오름차순만 가능)
- 정확도순: {"_score": "desc"} (내림차순만 가능)
- 다중 정렬: [{"date": "desc"}, {"_score": "desc"}]

정렬 가능 필드:
- date: 날짜 (desc/asc)
- title: 제목 (asc)
- _score: 정확도 (desc)
- byline: 기고자 (asc)
- provider_code: 매체코드 (desc/asc)

■ hilight (하이라이트)
- 검색어가 포함된 영역을 지정 범위(최대 200자)로 출력

■ return_from (반환 시작 위치)
- 검색 결과 목록에서 반환할 시작 위치
- 최대 20,000까지 가능

■ return_size (반환 개수)
- 시작 위치부터 반환할 개수
- 최대 10,000까지 가능 (특정 언론사는 15,000까지 제한)

■ fields (출력 필드)
- 출력 결과에서 반환할 필드 값 지정
- 필요하지 않은 경우에도 빈 배열([])을 입력해야 함
- 지정하지 않은 필드는 반환하지 않음

지정 가능한 필드:
["byline", "category", "category_incident", "provider_news_id", 
 "title", "content", "published_at", "images", "images_caption" 등]

--------------------------------------------------------------------
4. 응답 결과 형식
--------------------------------------------------------------------

{
  "result": 0,
  "return_object": {
    "total_hits": 155040,
    "documents": [
      {
        "news_id": "뉴스 식별자",
        "title": "기사 제목",
        "content": "기사 본문",
        "hilight": "검색어 포함 영역",
        "published_at": "발행일시",
        "enveloped_at": "수집일시",
        "dateline": "출고일시",
        "provider": "언론사명",
        "category": ["뉴스 분류"],
        "category_incident": ["사건사고 분류"],
        "byline": "기자명",
        "images": "이미지 파일명",
        "images_caption": "이미지 설명",
        "provider_news_id": "언론사 고유 식별값",
        "publisher_code": "언론사 고유 식별값",
        "provider_link_page": "원본 링크",
        "printing_page": "지면번호"
      }
    ]
  }
}

--------------------------------------------------------------------
5. 응답 필드 상세 설명
--------------------------------------------------------------------

■ total_hits
- 검색된 전체 문서 건수

■ documents
- 검색된 문서들의 JSON 객체 배열
- fields 항목에 지정한 필드만 값이 반환됨

필드별 설명:

news_id
- 언론진흥재단 내 뉴스 식별자

title
- 뉴스기사 제목

content
- 뉴스기사 본문

published_at
- 뉴스기사 발행일 (세계표준시간 기준)
- 형식: "2019-03-14T00:00:00.000+09:00"

enveloped_at
- 언론사로부터 뉴스기사를 수집한 시간

dateline
- 언론사로부터 전달받은 뉴스 출고시간

provider
- 언론사명

category
- 뉴스통합분류체계

category_incident
- 뉴스사건/사고 분류체계

hilight
- 검색어가 포함된 영역 (요청 시 지정한 경우만)

byline
- 기자 이름

images
- 이미지 파일 이름
- 예: /01100701/2016/02/17/P160217124532014021.jpg

images_caption
- 이미지 설명 정보

provider_subject
- 언론사에서 제공한 뉴스 분류 값(코드)
- 예: [{"subject_info": "사회", "subject_info1": "1234"}]

subject_info
- NewsML SubjectInfo 값
- comma 또는 파이프(|) 구분자는 배열로 변환

subject_info1~4
- NewsML SubjectInfo1~4 값
- comma 또는 파이프(|) 구분자는 배열로 변환

provider_news_id / publisher_code
- 언론사에서 제공한 뉴스 고유 식별값
- 언론사마다 서로 다른 형식 사용

provider_link_page
- 언론사 원본 링크페이지 (없는 경우 존재하지 않음)

printing_page
- 지면번호 (없는 경우 존재하지 않음)

--------------------------------------------------------------------
6. 주의사항
--------------------------------------------------------------------

1. API 키는 발급받은 access_key를 사용해야 합니다.
2. 날짜 형식은 반드시 YYYY-MM-DD 형식을 따라야 합니다.
3. return_from은 최대 20,000까지만 가능합니다.
4. return_size는 최대 10,000까지 가능합니다.
   (특정 언론사는 15,000까지 제한)
5. fields는 빈 배열이라도 반드시 입력해야 합니다.
6. 언론사 주제 분류 값(코드)는 언론사와 시점에 따라 다릅니다.

====================================================================
문의: 한국언론진흥재단
====================================================================